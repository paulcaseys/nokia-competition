/**
 * Filename: js/app/views/ImageNavPanelView
 *
 * initialises the view
 * 
 */// 
// require js: defines the required js libraries and app files
define(["jquery","underscore","backbone","tweenlite","easepack","cosmosimageloader"],function(e,t,n,r,i){var s=n.View.extend({el:e("#image-nav-panel"),imageLoaderMain:null,imageMainIsLoaded:!1,imageToLoadIntoMain:0,prevImage:1e5,windowBigEnough:!0,initialize:function(){me=this;e(this.el).hide();this.on("testCall",this.testMethod,this);this.on("transitionInCall",this.transitionInMethod,this)},gotoHomeBg:function(){me.showSideNav();me.showBg(1);me.hideVideoImageOverlay()},gotoWinBg:function(){me.hideSideNav();me.showBg(3);me.hideVideoImageOverlay()},gotoFeaturesBg:function(){me.hideSideNav();me.showBg(4);me.hideVideoImageOverlay()},gotoVideoBg:function(){me.hideSideNav();me.showVideoImageOverlay()},showSideNav:function(){if(this.windowBigEnough){TweenLite.to(e("#image-nav-panel .image-side-nav-right-mask"),4,{css:{width:"66px"},ease:Elastic.easeOut,delay:2});TweenLite.to(e("#image-nav-panel .image-side-nav-left-mask"),4.2,{css:{width:"66px"},ease:Elastic.easeOut,delay:2.2})}},hideSideNav:function(){TweenLite.to(e("#image-nav-panel .image-side-nav-right-mask"),1,{css:{width:"0px"},ease:Power4.easeOut});TweenLite.to(e("#image-nav-panel .image-side-nav-left-mask"),1,{css:{width:"0px"},ease:Power4.easeInOut})},showVideoImageOverlay:function(){TweenLite.to(e("#background-image-panel .background-image-video"),3,{css:{autoAlpha:1},ease:Power4.easeOut})},hideVideoImageOverlay:function(){TweenLite.to(e("#background-image-panel .background-image-video"),5,{css:{autoAlpha:0},ease:Power4.easeOut})},mainImagesLoadedHandler:function(e){me.imageMainIsLoaded=!0;clearInterval(me.imageLoaderMain.slideshowInterval);me.showBg(me.imageToLoadIntoMain)},showBg:function(e){if(me.imageMainIsLoaded===!0){if(e!=me.prevImage){Cosmos.Utils.DisplayImage("#background-image-panel .background-image-main",e-1,1e3,{change:""});me.prevImage=e}}else me.imageToLoadIntoMain=e},defineArrows:function(t){var n=t;t>1?n--:n=3;var r=t;t<3?r++:r=1;var i=App.Models.PeopleModel["person"+r],s=App.Models.PeopleModel["person"+n];e("#image-nav-panel .image-side-nav-right-mask .caption-text").html(i.firstName+" "+i.lastName);e("#image-nav-panel .image-side-nav-left-mask .caption-text").html(s.firstName+" "+s.lastName);var o=parseInt(e("#image-nav-panel .image-side-nav-right-mask .thumb").css("width"));TweenLite.to(e("#image-nav-panel .image-side-nav-right-mask .people-container"),.3,{css:{left:o*-1*(r-1)-30+"px"},ease:Power4.easeOut});TweenLite.to(e("#image-nav-panel .image-side-nav-left-mask .people-container"),.3,{css:{left:o*-1*(n-1)+30+"px"},ease:Power4.easeOut})},defineWindowSizeBigEnough:function(){if(e(window).width()>1050){if(me.windowBigEnough!=1){me.windowBigEnough=!0;me.showSideNav()}}else if(me.windowBigEnough!=0){me.windowBigEnough=!1;me.hideSideNav()}},testMethod:function(e){console.log("ImageNavPanelView testMethod")},transitionInMethod:function(e){this.transitionIn()},transitionIn:function(){me=this;this.addEventListeners();e(this.el).show();var t=this.mainImagesLoadedHandler;me.imageLoaderMain=new Cosmos.Utils.ImageLoaderWithRescaleSlideShow("#background-image-panel .background-image-main",[{img:"resources/images/big_img_cat_wide.png"},{img:"resources/images/big_img_emma_wide.png"},{img:"resources/images/big_img_kate_luke_wide.png"},{img:"resources/images/big_img_cat_wide_2.png"}],2e3,1e3,"rescaleEnabled","centreEnabled","elementResizeListenerEnabled",{success:t})},transitionOut:function(){this.removeEventListeners();e(this.el).hide()},addEventListeners:function(){function t(){App.Views.HomePageView.trigger("gotoNextPersonCall")}function n(){App.Views.HomePageView.trigger("gotoPrevPersonCall")}function r(){TweenLite.to(e(this),.3,{css:{width:"155px"},ease:Power4.easeOut})}function i(){TweenLite.to(e(this),.3,{css:{width:"66px"},ease:Power4.easeOut})}e("#image-nav-panel .image-side-nav-right-mask").on("click",App.Models.ConfigModel.eventObj,t);e("#image-nav-panel .image-side-nav-left-mask").on("click",App.Models.ConfigModel.eventObj,n);e("#image-nav-panel .image-side-nav-left-mask").on("mouseenter",App.Models.ConfigModel.eventObj,r);e("#image-nav-panel .image-side-nav-right-mask").on("mouseenter",App.Models.ConfigModel.eventObj,r);e("#image-nav-panel .image-side-nav-left-mask").on("mouseleave",App.Models.ConfigModel.eventObj,i);e("#image-nav-panel .image-side-nav-right-mask").on("mouseleave",App.Models.ConfigModel.eventObj,i);me.defineWindowSizeBigEnough();e(window).resize(function(){me.defineWindowSizeBigEnough()})},removeEventListeners:function(){e("#image-nav-panel .image-side-nav-right-mask").off("click",App.Models.ConfigModel.eventObj);e("#image-nav-panel .image-side-nav-left-mask").off("click",App.Models.ConfigModel.eventObj);e("#image-nav-panel .image-side-nav-left-mask").off("mouseenter",App.Models.ConfigModel.eventObj);e("#image-nav-panel .image-side-nav-right-mask").off("mouseenter",App.Models.ConfigModel.eventObj);e("#image-nav-panel .image-side-nav-left-mask").off("mouseleave",App.Models.ConfigModel.eventObj);e("#image-nav-panel .image-side-nav-right-mask").off("mouseleave",App.Models.ConfigModel.eventObj)}});return s});