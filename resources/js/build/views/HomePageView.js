/**
 * Filename: js/app/views/HomePageView
 *
 * initialises the view
 *
 *///
// require js: defines the required js libraries and app files
define(["jquery","underscore","backbone","tweenlite","cssplugin","cosmosimageloader","App.Models.StateModel","App.Models.StateMenuModel","App.Views.HomePanelView"],function(e,t,n,r,i,s,o,u,a){var f=n.View.extend({el:e("#home-page"),curPerson:1,homePersonInterval:null,initialize:function(){var t=this;e(this.el).hide();App.Models.HomePanelsStateModel=new o;App.Models.HomePanelStateMenuModel=new u;App.Views.HomePanelView1=new a({el:".home-person-1",panelID:1});App.Views.HomePanelView2=new a({el:".home-person-2",panelID:2});App.Views.HomePanelView3=new a({el:".home-person-3",panelID:3});App.Views.HomePanelView1.definePanelID(1);App.Views.HomePanelView2.definePanelID(2);App.Views.HomePanelView3.definePanelID(3);this.initPerson(1);this.initPerson(2);this.initPerson(3);this.on("testCall",this.testMethod,this);this.on("gotoPrevPersonCall",this.gotoPrevPersonMethod,this);this.on("gotoNextPersonCall",this.gotoNextPersonMethod,this)},testMethod:function(e){console.log("HomePageView testMethod")},initPerson:function(t){var n=App.Models.PeopleModel["person"+t],r="#home-page .home-person-"+t+" .video-row .base";e(r).html("Watch "+n.firstName+"'s Video");var i=new Cosmos.Utils.ImageLoaderWithRescaleSlideShow("#home-page .home-person-"+t+" .phone-style",[{img:"resources/images/home_phone_"+n.phoneColor+".png"}],2e3,1e3,"rescaleDisabled","centreDisabled","elementResizeListenerDisabled"),s=new Cosmos.Utils.ImageLoaderWithRescaleSlideShow("#home-page .home-person-"+t+" .phone-thumbs",[{img:"resources/images/home_phone_clip_"+n.fileName+"_01.png"},{img:"resources/images/home_phone_clip_"+n.fileName+"_02.png"}],2e3,1e3,"rescaleDisabled","centreDisabled","elementResizeListenerDisabled")},gotoPerson:function(e){App.Models.HomePanelsStateModel.showView(App.Views["HomePanelView"+e]);App.Views.ImageNavPanelView.showBg(e);App.Views.ImageNavPanelView.defineArrows(e);this.curPerson=e;this.clearPersonInterval();this.addPersonInterval()},gotoPrevPersonMethod:function(e){console.log("prev");var t=this.curPerson;this.curPerson>1?t--:t=3;this.gotoPerson(t)},gotoNextPersonMethod:function(e){var t=this.curPerson;this.curPerson<3?t++:t=1;this.gotoPerson(t)},addPersonInterval:function(){var e=this;this.homePersonInterval=self.setInterval(function(){e.gotoNextPersonMethod(null)},8e3)},clearPersonInterval:function(){var e=this;clearInterval(e.homePersonInterval)},transitionIn:function(){this.addEventListeners();e(this.el).show();TweenLite.to(e(".mid-wrapper"),1.5,{css:{height:490},ease:Expo.easeInOut});this.gotoPerson(1)},transitionOut:function(){this.removeEventListeners();e(this.el).hide()},addEventListeners:function(){function n(){App.Router.navigate("win/",!0)}function r(){TweenLite.to(e("#home-page .enter"),.3,{css:{left:"3px",top:"-3px"},ease:Power4.easeOut});TweenLite.to(e("#home-page .location"),.3,{css:{left:"3px"},ease:Power4.easeOut})}function i(){TweenLite.to(e("#home-page .enter"),.6,{css:{left:"0px",top:"0px"},ease:Power4.easeOut});TweenLite.to(e("#home-page .location"),.6,{css:{left:"0px"},ease:Power4.easeOut})}var t=this;this.addPersonInterval();e("#home-page .texter").on("click",App.Models.ConfigModel.eventObj,n);e("#home-page .texter").on("mouseenter",App.Models.ConfigModel.eventObj,r);e("#home-page .texter").on("mouseleave",App.Models.ConfigModel.eventObj,i)},removeEventListeners:function(){this.clearPersonInterval();e("#home-page .texter").off("click",App.Models.ConfigModel.eventObj);e("#home-page .texter").off("mouseenter",App.Models.ConfigModel.eventObj);e("#home-page .texter").off("mouseleave",App.Models.ConfigModel.eventObj)}});return f});